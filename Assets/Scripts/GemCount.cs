using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.SceneManagement;

public class GemCount : MonoBehaviour
{
    public static GemCount count;

    private int countGem = 0;
    public string SceneName;

    void Awake()
    {
        if (count == null)
        {
            DontDestroyOnLoad(gameObject);
            count = this;
        } else if(count != this)
        {
            Destroy(gameObject);
        }
    }

    void Start()
    {
        //Call our SetCountText function which will update the text with the current value for count.
        SetCountText();
    }

    private void OnTriggerEnter(Collider collision)
    {
        //Check for a match with the specified name on any GameObject that collides with your GameObject
        if (collision.gameObject.tag == "Gem")
        {
            Debug.Log("You collected a gem! " + countGem);
            collision.gameObject.SetActive(false);
            //Add one to the current value of our count variable.
            countGem = countGem + 1;
            //Update the currently displayed count by calling the SetCountText function.
            SetCountText();

        }
    }

    //This function updates the text displaying the number of objects we've collected and displays our victory message if we've collected all of them.
    void SetCountText()
    {
        //Set the text property of our our countText object to "Count: " followed by the number stored in our count variable.
        Debug.Log("Count: " + countGem.ToString());

        //Check if we've collected all 5 gems.
        if (countGem == 5)
        {
            Debug.Log("You got all the gems!");
            Debug.Log("Time to change to Portal Scene");
            //If the GameObject's name matches the one you suggest, output this message in the console and change scene
            SceneManager.LoadScene(SceneName, LoadSceneMode.Additive);
        }
    }
}